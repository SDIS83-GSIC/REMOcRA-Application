<configuration>
  <jdbc>
    <driver>org.postgresql.Driver</driver>
    <url>${db.url}</url>
    <user>${db.user}</user>
    <password>${db.password}</password>
  </jdbc>
  <generator>
    <name>org.jooq.codegen.KotlinGenerator</name>
    <database>
      <name>org.jooq.meta.postgres.PostgresDatabase</name>
      <schemata>
        <schema>
          <inputSchema>remocra</inputSchema>
        </schema>
        <schema>
          <inputSchema>historique</inputSchema>
        </schema>
        <schema>
          <inputSchema>couverturehydraulique</inputSchema>
        </schema>
        <schema>
          <inputSchema>entrepotsig</inputSchema>
        </schema>
        <schema>
          <inputSchema>incoming</inputSchema>
        </schema>
      </schemata>
      <excludes>flyway_schema_history|flyway_data_history|pgp_armor_headers</excludes>
      <includeRoutines>false</includeRoutines>
      <forcedTypes>
        <forcedType>
          <userType>org.locationtech.jts.geom.Geometry</userType>
          <binding>remocra.db.jooq.bindings.GeometryBinding</binding>
          <types>Geometry</types>
        </forcedType>
        <forcedType>
          <userType>java.time.ZonedDateTime</userType>
          <binding>remocra.db.jooq.bindings.ZonedDateTimeBinding</binding>
          <types>TIMESTAMPTZ</types>
        </forcedType>
      </forcedTypes>
    </database>
    <generate>
      <records>false</records>
      <pojos>true</pojos>
      <immutablePojos>true</immutablePojos>
      <javaTimeTypes>true</javaTimeTypes>
      <generatedAnnotation>true</generatedAnnotation>
      <nullableAnnotation>true</nullableAnnotation>
      <nullableAnnotationType>org.checkerframework.checker.nullness.qual.Nullable</nullableAnnotationType>
      <nonnullAnnotation>true</nonnullAnnotation>
      <nonnullAnnotationType>org.checkerframework.checker.nullness.qual.NonNull</nonnullAnnotationType>
      <implicitJoinPathsAsKotlinProperties>true</implicitJoinPathsAsKotlinProperties>
      <!--  Workaround for Kotlin generating setX() setters instead of setIsX() in byte code for mutable properties called
            <code>isX</code>. Default is true. -->
      <kotlinSetterJvmNameAnnotationsOnIsPrefix>true</kotlinSetterJvmNameAnnotationsOnIsPrefix>
      <!-- Generate POJOs as data classes, when using the KotlinGenerator. Default is true. -->
      <pojosAsKotlinDataClasses>true</pojosAsKotlinDataClasses>

      <!-- Generate non-nullable types on POJO attributes, where column is not null. Default is false. -->
      <kotlinNotNullPojoAttributes>true</kotlinNotNullPojoAttributes>

      <!-- Generate non-nullable types on Record attributes, where column is not null. Default is false. -->
      <kotlinNotNullRecordAttributes>true</kotlinNotNullRecordAttributes>

      <!-- Generate non-nullable types on interface attributes, where column is not null. Default is false. -->
      <kotlinNotNullInterfaceAttributes>true</kotlinNotNullInterfaceAttributes>
      <!-- Generate defaulted nullable POJO attributes. Default is true. -->
      <kotlinDefaultedNullablePojoAttributes>false</kotlinDefaultedNullablePojoAttributes>

      <!-- Generate defaulted nullable Record attributes. Default is true. -->
      <kotlinDefaultedNullableRecordAttributes>false</kotlinDefaultedNullableRecordAttributes>

    </generate>
    <strategy>
      <matchers>
        <fields>
          <field>
            <expression>^(?:.*\.)?([^.]*)\.\1_(.*)$</expression>
            <fieldIdentifier>
              <expression>$2</expression>
              <transform>UPPER</transform>
            </fieldIdentifier>
          </field>
        </fields>
      </matchers>
    </strategy>
    <target>
      <packageName>remocra.db.jooq</packageName>
      <directory>${outputdir}</directory>
      <encoding>UTF-8</encoding>
    </target>
  </generator>
</configuration>
